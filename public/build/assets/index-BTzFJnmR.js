import{A as g,C as i,b as e,k as D,W as z,m as u}from"./vendor-ui-EoCh-MHn.js";import{R as c,D as y}from"./require-permission-BJyVuF1C.js";import{T as d,e as h,B as o,A as p,f as m,D as b,g as C,h as $,i as x,j as T,k as P,l as k,m as f,y as v,u as w,o as S}from"./main-BOr6r2Li.js";import{e as N}from"./external-link-CucyAs3K.js";import{l as A}from"./list-BW_6T39E.js";import{p as K}from"./pencil-CQiVfSaq.js";import{t as R,p as V}from"./trash-2-DOJoAOpY.js";import"./vendor-table-_hmjMY5i.js";import"./table-I-pNqt2p.js";import"./chevron-right-BptwTlic.js";import"./badge-Cb4aX-6k.js";import"./vendor-form-BYywqLDt.js";import"./vendor-editor-B9FEBeCH.js";var q=g('<a target=_blank rel="noopener noreferrer"class="group inline-flex items-center gap-1 font-medium hover:opacity-70 transition-opacity"><span>'),_=g('<span class="text-sm text-muted-foreground">'),B=g('<div class="flex items-center gap-1">');const H=[{accessorKey:"name",header:"名称",cell:t=>{const s=t.row.original;return(()=>{var r=q(),l=r.firstChild;return i(l,()=>t.getValue()),i(r,e(N,{class:"size-3.5 shrink-0 opacity-0 group-hover:opacity-100 transition-opacity"}),null),D(()=>z(r,"href",s.url)),r})()}},{accessorKey:"created_at",header:"创建时间",cell:t=>{const s=new Date(t.getValue());return(()=>{var r=_();return i(r,()=>s.toLocaleDateString("zh-CN")),r})()}},{accessorKey:"updated_at",header:"更新时间",cell:t=>{const s=new Date(t.getValue());return(()=>{var r=_();return i(r,()=>s.toLocaleDateString("zh-CN")),r})()}},{id:"actions",header:"操作",cell:t=>{const s=t.row.original,r=t.table.options.meta,l=async()=>{try{await v.delete(s.id),r.refetch()}catch(n){console.error("删除失败",n)}};return(()=>{var n=B();return i(n,e(c,{permission:"taxonomies:view_tag_content",get children(){return e(d,{get children(){return[e(h,{as:a=>e(o,u({as:p,get href(){return`/tags/${s.id}/contents`},variant:"ghost",size:"icon-sm"},a,{get children(){return e(A,{class:"size-3.5"})}}))}),e(m,{children:"内容管理"})]}})}}),null),i(n,e(c,{permission:"taxonomies:update_tag",get children(){return e(d,{get children(){return[e(h,{as:a=>e(o,u({as:p,get href(){return`/tags/${s.id}`},variant:"ghost",size:"icon-sm"},a,{get children(){return e(K,{class:"size-3.5"})}}))}),e(m,{children:"编辑"})]}})}}),null),i(n,e(c,{permission:"taxonomies:delete_tag",get children(){return e(b,{get children(){return[e(d,{get children(){return[e(C,{as:a=>e(h,u({as:o,variant:"ghost",size:"icon-sm",class:"text-destructive hover:text-destructive hover:bg-destructive/10"},a,{get children(){return e(R,{class:"size-3.5"})}}))}),e(m,{children:"删除"})]}}),e($,{get children(){return[e(x,{get children(){return[e(T,{children:"删除标签"}),e(P,{children:"删除后将无法恢复，确定要删除该标签吗？"})]}}),e(k,{get children(){return[e(f,{as:o,variant:"outline",children:"取消"}),e(f,{as:o,variant:"destructive",onClick:l,children:"确认删除"})]}})]}})]}})}}),null),n})()},enableHiding:!1}],L=[];var j=g('<div class="rounded-lg border bg-card p-3.5 pb-2">');function ee(){const[t,s]=w(),r=S(),l=()=>({search:typeof t.search=="string"?t.search:void 0,page:Number(t.page)||1,page_size:Number(t.page_size)||10}),n=a=>{s({search:a.search||"",page:String(a.page??1),page_size:String(a.page_size??10)})};return(()=>{var a=j();return i(a,e(y,{columns:H,get fetcher(){return v.list},get queryParams(){return l()},onChange:n,filterConfig:L,searchPlaceholder:"搜索标签...",get toolbarActions(){return e(c,{permission:"taxonomies:create_tag",get children(){return e(o,{size:"sm",onClick:()=>r("/tags/create"),get children(){return[e(V,{class:"size-4"}),"添加标签"]}})}})}})),a})()}export{ee as default};

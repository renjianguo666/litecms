import{b as e,A as c,C as i,k as x,W as b,U as y,m}from"./vendor-ui-EoCh-MHn.js";import{R as p,D}from"./require-permission-W41G8ZR9.js";import{e as u,t as $,f as d,T as g,B as o,A as h,D as z,g as C,h as k,i as T,j as P,k as w,l as S,m as v,z as _,u as A,o as K}from"./main-DH-8hjXZ.js";import{l as N}from"./list-lFBgOIUf.js";import{e as V}from"./external-link-B6X1Crxl.js";import{p as R}from"./pencil-DiqpFMCl.js";import{t as q,p as B}from"./trash-2-DTqUw5ZB.js";import"./vendor-table-_hmjMY5i.js";import"./table-B19tFIsU.js";import"./chevron-right-BwwnFwHg.js";import"./badge-DHoF6Ywq.js";import"./vendor-form-BYywqLDt.js";import"./vendor-editor-B9FEBeCH.js";var H=c('<a target=_blank rel="noopener noreferrer"class="group inline-flex items-center gap-1 font-medium hover:opacity-70 transition-opacity"><span>'),j=c("<span>"),f=c('<span class="text-sm text-muted-foreground">'),E=c('<div class="flex items-center gap-1">');const F=[{accessorKey:"id",header:"ID",cell:t=>{const r=t.getValue();return e(g,{get children(){return[e(u,{as:"button",class:"font-mono text-xs text-muted-foreground hover:text-foreground cursor-pointer",onClick:()=>{navigator.clipboard.writeText(r),$.success(r,"复制成功")},get children(){return r.slice(-8)}}),e(d,{children:r})]}})}},{accessorKey:"name",header:"名称",cell:t=>{const r=t.row.original;return(()=>{var a=H(),l=a.firstChild;return i(l,()=>t.getValue()),i(a,e(V,{class:"size-3.5 shrink-0 opacity-0 group-hover:opacity-100 transition-opacity"}),null),x(()=>b(a,"href",r.url)),a})()}},{accessorKey:"is_active",header:"状态",cell:t=>{const r=t.getValue();return(()=>{var a=j();return y(a,`inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-md border ${r?"bg-green-500/10 text-green-600 border-green-500/20 dark:text-green-400":"bg-destructive/10 text-destructive border-destructive/20"}`),i(a,r?"上线":"下线"),a})()}},{accessorKey:"priority",header:"优先级",cell:t=>(()=>{var r=f();return i(r,()=>t.getValue()),r})()},{accessorKey:"created_at",header:"创建时间",cell:t=>{const r=new Date(t.getValue());return(()=>{var a=f();return i(a,()=>r.toLocaleDateString("zh-CN")),a})()}},{id:"actions",header:"操作",cell:t=>{const r=t.row.original,a=t.table.options.meta,l=async()=>{try{await _.delete(r.id),a.refetch()}catch(n){console.error("删除失败",n)}};return(()=>{var n=E();return i(n,e(p,{permission:"taxonomies:view_special_content",get children(){return e(g,{get children(){return[e(u,{as:s=>e(o,m({as:h,get href(){return`/specials/${r.id}/contents`},variant:"ghost",size:"icon-sm"},s,{get children(){return e(N,{class:"size-3.5"})}}))}),e(d,{children:"内容管理"})]}})}}),null),i(n,e(p,{permission:"taxonomies:update_special",get children(){return e(g,{get children(){return[e(u,{as:s=>e(o,m({as:h,get href(){return`/specials/${r.id}`},variant:"ghost",size:"icon-sm"},s,{get children(){return e(R,{class:"size-3.5"})}}))}),e(d,{children:"编辑"})]}})}}),null),i(n,e(p,{permission:"taxonomies:delete_special",get children(){return e(z,{get children(){return[e(g,{get children(){return[e(C,{as:s=>e(u,m({as:o,variant:"ghost",size:"icon-sm",class:"text-destructive hover:text-destructive hover:bg-destructive/10"},s,{get children(){return e(q,{class:"size-3.5"})}}))}),e(d,{children:"删除"})]}}),e(k,{get children(){return[e(T,{get children(){return[e(P,{children:"删除专题"}),e(w,{children:"删除后将无法恢复，确定要删除该专题吗？"})]}}),e(S,{get children(){return[e(v,{as:o,variant:"outline",children:"取消"}),e(v,{as:o,variant:"destructive",onClick:l,children:"确认删除"})]}})]}})]}})}}),null),n})()},enableHiding:!1}];var I=c('<div class="rounded-lg border bg-card p-3.5 pb-2">');function te(){const[t,r]=A(),a=K(),l=()=>({search:typeof t.search=="string"?t.search:void 0,page:Number(t.page)||1,page_size:Number(t.page_size)||10}),n=s=>{r({search:s.search||"",page:String(s.page??1),page_size:String(s.page_size??10)})};return(()=>{var s=I();return i(s,e(D,{columns:F,get fetcher(){return _.list},get queryParams(){return l()},onChange:n,searchPlaceholder:"搜索专题...",get toolbarActions(){return e(p,{permission:"taxonomies:create_special",get children(){return e(o,{size:"sm",onClick:()=>a("/specials/create"),get children(){return[e(B,{class:"size-4"}),"添加专题"]}})}})}})),s})()}export{te as default};

import{b as e,A as g,C as i,m}from"./vendor-ui-EoCh-MHn.js";import{R as d,D}from"./require-permission-BcVShErJ.js";import{e as l,t as x,f as c,T as u,B as o,A as p,D as z,g as b,h as C,i as $,j as y,k as T,l as P,m as f,E as _,u as w,o as S}from"./main-dmt7HXak.js";import{l as N}from"./list-CBwhSd-x.js";import{p as k}from"./pencil-Xd9e-CCy.js";import{t as K,p as V}from"./trash-2-DbsMsYFW.js";import"./vendor-table-_hmjMY5i.js";import"./table-DYNmzVki.js";import"./chevron-right-2lgA9xTq.js";import"./badge-Bft3w19m.js";import"./vendor-form-P-S2gzVM.js";import"./vendor-editor-B9FEBeCH.js";var A=g("<span class=font-medium>"),v=g('<span class="text-sm text-muted-foreground">'),q=g('<div class="flex items-center gap-1">');const B=[{accessorKey:"id",header:"ID",cell:t=>{const r=t.getValue();return e(u,{get children(){return[e(l,{as:"button",class:"font-mono text-xs text-muted-foreground hover:text-foreground cursor-pointer",onClick:()=>{navigator.clipboard.writeText(r),x.success(r,"复制成功")},get children(){return r.slice(-8)}}),e(c,{children:r})]}})}},{accessorKey:"name",header:"名称",cell:t=>(()=>{var r=A();return i(r,()=>t.getValue()),r})()},{accessorKey:"created_at",header:"创建时间",cell:t=>{const r=new Date(t.getValue());return(()=>{var s=v();return i(s,()=>r.toLocaleDateString("zh-CN")),s})()}},{accessorKey:"updated_at",header:"更新时间",cell:t=>{const r=new Date(t.getValue());return(()=>{var s=v();return i(s,()=>r.toLocaleDateString("zh-CN")),s})()}},{id:"actions",header:"操作",cell:t=>{const r=t.row.original,s=t.table.options.meta,h=async()=>{try{await _.delete(r.id),s.refetch()}catch(n){console.error("删除失败",n)}};return(()=>{var n=q();return i(n,e(d,{permission:"taxonomies:view_feature_content",get children(){return e(u,{get children(){return[e(l,{as:a=>e(o,m({as:p,get href(){return`/features/${r.id}/contents`},variant:"ghost",size:"icon-sm"},a,{get children(){return e(N,{class:"size-3.5"})}}))}),e(c,{children:"内容管理"})]}})}}),null),i(n,e(d,{permission:"taxonomies:update_feature",get children(){return e(u,{get children(){return[e(l,{as:a=>e(o,m({as:p,get href(){return`/features/${r.id}`},variant:"ghost",size:"icon-sm"},a,{get children(){return e(k,{class:"size-3.5"})}}))}),e(c,{children:"编辑"})]}})}}),null),i(n,e(d,{permission:"taxonomies:delete_feature",get children(){return e(z,{get children(){return[e(u,{get children(){return[e(b,{as:a=>e(l,m({as:o,variant:"ghost",size:"icon-sm",class:"text-destructive hover:text-destructive hover:bg-destructive/10"},a,{get children(){return e(K,{class:"size-3.5"})}}))}),e(c,{children:"删除"})]}}),e(C,{get children(){return[e($,{get children(){return[e(y,{children:"删除推荐位"}),e(T,{children:"删除后将无法恢复，确定要删除该推荐位吗？"})]}}),e(P,{get children(){return[e(f,{as:o,variant:"outline",children:"取消"}),e(f,{as:o,variant:"destructive",onClick:h,children:"确认删除"})]}})]}})]}})}}),null),n})()},enableHiding:!1}],F=[];var H=g('<div class="rounded-lg border bg-card p-3.5 pb-2">');function X(){const[t,r]=w(),s=S(),h=()=>({search:typeof t.search=="string"?t.search:void 0,page:Number(t.page)||1,page_size:Number(t.page_size)||10}),n=a=>{r({search:a.search||"",page:String(a.page??1),page_size:String(a.page_size??10)})};return(()=>{var a=H();return i(a,e(D,{columns:B,get fetcher(){return _.list},get queryParams(){return h()},onChange:n,filterConfig:F,searchPlaceholder:"搜索推荐位...",get toolbarActions(){return e(d,{permission:"taxonomies:create_feature",get children(){return e(o,{size:"sm",onClick:()=>s("/features/create"),get children(){return[e(V,{class:"size-4"}),"添加推荐位"]}})}})}})),a})()}export{X as default};

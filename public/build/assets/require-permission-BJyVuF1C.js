import{b as t,m as k,A as u,C as r,z as Y,d as J,Y as ne,e as w,k as O,U as q,F as C,S as g,a0 as le,h as B}from"./vendor-ui-EoCh-MHn.js";import{c as re,f as G,g as ae,a as ie}from"./vendor-table-_hmjMY5i.js";import{I as P,a4 as se,a5 as ce,a6 as oe,a7 as ue,a8 as ge,B as z,Q as de,R as K,a9 as T,aa as I,s as j,ab as R,ac as N,v as H,S as W,ad as X,ae as he,af as ve}from"./main-BOr6r2Li.js";import{T as me,a as fe,b as L,c as xe,d as be,e as Q}from"./table-I-pNqt2p.js";import{c as $e}from"./chevron-right-BptwTlic.js";import{B as D}from"./badge-Cb4aX-6k.js";var _e=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ye=e=>t(P,k(e,{iconNode:_e,name:"chevron-left"})),Ce=ye,we=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],Se=e=>t(P,k(e,{iconNode:we,name:"chevrons-left"})),pe=Se,ze=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],ke=e=>t(P,k(e,{iconNode:ze,name:"chevrons-right"})),Pe=ke,Te=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Ie=e=>t(P,k(e,{iconNode:Te,name:"columns-3"})),je=Ie,Re=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],Ne=e=>t(P,k(e,{iconNode:Re,name:"inbox"})),Me=Ne;function Fe(e,i,n){const l=Math.ceil(n/i)||1,a=e<l,s=e>1,c=n===0?0:(e-1)*i+1,d=Math.min(e*i,n);return{totalPages:l,hasNext:a,hasPrev:s,startIndex:c,endIndex:d,showingText:n===0?"暂无数据":`显示 ${c}-${d} 条，共 ${n} 条记录`}}var Ve=u("<span class=sr-only>第一页"),qe=u("<span class=sr-only>上一页"),De=u("<span class=sr-only>下一页"),Ae=u("<span class=sr-only>最后一页"),Be=u('<div class="flex items-center justify-between px-2"><div class="flex-1 text-sm text-muted-foreground"></div><div class="flex items-center space-x-6 lg:space-x-8"><div class="flex items-center space-x-2"><p class="text-sm font-medium">每页</p><p class="text-sm font-medium">条</p></div><div class="flex w-[130px] items-center justify-center text-sm font-medium">第 <!> 页，共 <!> 页</div><div class="flex items-center space-x-2">');const U=[{value:"10",label:"10"},{value:"20",label:"20"},{value:"50",label:"50"},{value:"100",label:"100"}];function Le(e){const i=()=>Fe(e.table.getState().pagination.pageIndex+1,e.table.getState().pagination.pageSize,e.table.getRowCount()),n=()=>U.find(l=>l.value===String(e.table.getState().pagination.pageSize));return(()=>{var l=Be(),a=l.firstChild,s=a.nextSibling,c=s.firstChild,d=c.firstChild,x=d.nextSibling,b=c.nextSibling,v=b.firstChild,$=v.nextSibling,S=$.nextSibling,M=S.nextSibling;M.nextSibling;var p=b.nextSibling;return r(a,()=>i().showingText),r(c,t(se,{get value(){return n()},options:U,optionValue:"value",optionTextValue:"label",onChange:m=>{m&&e.table.setPagination({pageIndex:0,pageSize:Number(m.value)})},itemComponent:m=>t(ge,{get item(){return m.item},get children(){return m.item.rawValue.label}}),get children(){return[t(ce,{class:"h-8 w-[70px]",size:"sm",get children(){return t(oe,{children:m=>m.selectedOption()?.label})}}),t(ue,{})]}}),x),r(b,()=>e.table.getState().pagination.pageIndex+1,$),r(b,()=>e.table.getPageCount()||1,M),r(p,t(z,{variant:"outline",size:"icon-sm",class:"hidden lg:flex",get disabled(){return!e.table.getCanPreviousPage()},onClick:()=>e.table.setPageIndex(0),get children(){return[Ve(),t(pe,{class:"size-4"})]}}),null),r(p,t(z,{variant:"outline",size:"icon-sm",get disabled(){return!e.table.getCanPreviousPage()},onClick:()=>e.table.previousPage(),get children(){return[qe(),t(Ce,{class:"size-4"})]}}),null),r(p,t(z,{variant:"outline",size:"icon-sm",get disabled(){return!e.table.getCanNextPage()},onClick:()=>e.table.nextPage(),get children(){return[De(),t($e,{class:"size-4"})]}}),null),r(p,t(z,{variant:"outline",size:"icon-sm",class:"hidden lg:flex",get disabled(){return!e.table.getCanNextPage()},onClick:()=>e.table.setPageIndex(e.table.getPageCount()-1),get children(){return[Ae(),t(Pe,{class:"size-4"})]}}),null),l})()}var He=u("<div>"),Oe=u('<button type=button class="absolute right-2 top-1/2 -translate-y-1/2 rounded-sm p-0.5 text-muted-foreground transition-colors hover:text-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring">');function Ee(e){const[i,n]=J(e.value);let l;ne(()=>{n(e.value)});const a=c=>{const d=c.currentTarget.value;n(d),l&&clearTimeout(l),l=setTimeout(()=>{e.onChange(d)},e.debounceDelay??500)},s=()=>{n(""),e.onChange("")};return(()=>{var c=He();return r(c,t(de,{class:"absolute left-2.5 top-1/2 size-4 -translate-y-1/2 text-muted-foreground pointer-events-none"}),null),r(c,t(K,{id:"datatable-search",type:"text",get value(){return i()},onInput:a,get placeholder(){return e.placeholder??"搜索..."},class:"w-48 pl-8 pr-8 lg:w-64"}),null),r(c,(()=>{var d=w(()=>!!i());return()=>d()&&(()=>{var x=Oe();return x.$$click=s,r(x,t(T,{class:"size-4"})),x})()})(),null),O(()=>q(c,`relative ${e.class??""}`)),c})()}Y(["click"]);var A=u("<span class=text-muted-foreground>"),E=u('<div class="-mx-1 my-1 h-px bg-muted">'),Ge=u('<button type=button class="relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm text-muted-foreground outline-none transition-colors hover:bg-accent hover:text-accent-foreground"><span>清除选择'),Z=u('<div class="flex flex-col">'),Qe=u('<button type=button><span class="absolute left-2 flex size-3.5 items-center justify-center"></span><span class=pl-6>'),Ue=u('<button type=button class="relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm text-muted-foreground outline-none transition-colors hover:bg-accent hover:text-accent-foreground"><span>清除全部'),Ye=u('<button type=button class="relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm text-muted-foreground outline-none transition-colors hover:bg-accent hover:text-accent-foreground"><span>清除'),Je=u('<div class="flex flex-col"><button type=button><span class="absolute left-2 flex size-3.5 items-center justify-center"></span><span class=pl-6></span></button><button type=button><span class="absolute left-2 flex size-3.5 items-center justify-center"></span><span class=pl-6>'),Ke=u('<div class="flex flex-col gap-2">');function We(e){const i=(n,l)=>{e.onChange({...e.filters,[n]:l})};return t(C,{get each(){return e.config},children:n=>{switch(n.variant){case"select":return t(Xe,{get label(){return n.label},get placeholder(){return n.placeholder},get options(){return n.options??[]},get value(){return e.filters[n.name]},onChange:l=>i(n.name,l)});case"multi-select":return t(Ze,{get label(){return n.label},get placeholder(){return n.placeholder},get options(){return n.options??[]},get value(){return e.filters[n.name]??[]},onChange:l=>i(n.name,l)});case"boolean":return t(et,{get label(){return n.label},get trueText(){return n.trueText},get falseText(){return n.falseText},get value(){return e.filters[n.name]},onChange:l=>i(n.name,l)});case"date":return t(tt,{get label(){return n.label},get placeholder(){return n.placeholder},get value(){return e.filters[n.name]},onChange:l=>i(n.name,l)});default:return null}}})}function Xe(e){const i=()=>e.options.find(n=>n.value===e.value)?.label;return t(N,{get children(){return[t(I,{class:"inline-flex h-9 items-center justify-center gap-1.5 rounded-md border border-input bg-transparent px-3 text-sm font-medium shadow-xs transition-[color,box-shadow] outline-none hover:bg-accent hover:text-accent-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]",get children(){return[(()=>{var n=A();return r(n,()=>e.label),n})(),t(g,{get when(){return w(()=>e.value!==void 0)()&&e.value!==""},get children(){return t(D,{variant:"secondary",class:"px-1.5 py-0.5 text-xs",get children(){return i()}})}}),t(j,{class:"size-4 opacity-50"})]}}),t(R,{class:"min-w-[180px] p-1",get children(){var n=Z();return r(n,t(C,{get each(){return e.options},children:l=>(()=>{var a=Qe(),s=a.firstChild,c=s.nextSibling;return a.$$click=()=>e.onChange(e.value===l.value?void 0:l.value),r(s,t(g,{get when(){return e.value===l.value},get children(){return t(H,{class:"size-4"})}})),r(c,()=>l.label),O(()=>q(a,`relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors hover:bg-accent hover:text-accent-foreground ${e.value===l.value?"bg-accent":""}`)),a})()}),null),r(n,t(g,{get when(){return w(()=>e.value!==void 0)()&&e.value!==""},get children(){return[E(),(()=>{var l=Ge(),a=l.firstChild;return l.$$click=()=>e.onChange(void 0),r(l,t(T,{class:"mr-2 size-4"}),a),l})()]}}),null),n}})]}})}function Ze(e){const i=()=>new Set(e.value??[]),n=a=>{const s=i();s.has(a)?s.delete(a):s.add(a),e.onChange(Array.from(s))},l=()=>!e.value||e.value.length===0?null:e.value.length>2?`${e.value.length} 项`:e.options.filter(a=>e.value.includes(a.value)).map(a=>a.label).join(", ");return t(N,{get children(){return[t(I,{class:"inline-flex h-9 items-center justify-center gap-1.5 rounded-md border border-input bg-transparent px-3 text-sm font-medium shadow-xs transition-[color,box-shadow] outline-none hover:bg-accent hover:text-accent-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]",get children(){return[(()=>{var a=A();return r(a,()=>e.label),a})(),t(g,{get when(){return w(()=>!!e.value)()&&e.value.length>0},get children(){return t(D,{variant:"secondary",class:"px-1.5 py-0.5 text-xs",get children(){return l()}})}}),t(j,{class:"size-4 opacity-50"})]}}),t(R,{class:"min-w-[200px] p-1",get children(){var a=Z();return r(a,t(C,{get each(){return e.options},children:s=>{const c=()=>i().has(s.value);return t(W,{get checked(){return c()},onChange:()=>n(s.value),class:"w-full rounded-sm py-1.5 px-2 hover:bg-accent hover:text-accent-foreground",get children(){return t(X,{class:"flex-1 cursor-pointer text-sm font-normal",get children(){return s.label}})}})}}),null),r(a,t(g,{get when(){return w(()=>!!e.value)()&&e.value.length>0},get children(){return[E(),(()=>{var s=Ue(),c=s.firstChild;return s.$$click=()=>e.onChange([]),r(s,t(T,{class:"mr-2 size-4"}),c),s})()]}}),null),a}})]}})}function et(e){const i=()=>e.trueText??"是",n=()=>e.falseText??"否";return t(N,{get children(){return[t(I,{class:"inline-flex h-9 items-center justify-center gap-1.5 rounded-md border border-input bg-transparent px-3 text-sm font-medium shadow-xs transition-[color,box-shadow] outline-none hover:bg-accent hover:text-accent-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]",get children(){return[(()=>{var l=A();return r(l,()=>e.label),l})(),t(g,{get when(){return e.value!==void 0},get children(){return t(D,{variant:"secondary",class:"px-1.5 py-0.5 text-xs",get children(){return w(()=>!!e.value)()?i():n()}})}}),t(j,{class:"size-4 opacity-50"})]}}),t(R,{class:"min-w-[140px] p-1",get children(){var l=Je(),a=l.firstChild,s=a.firstChild,c=s.nextSibling,d=a.nextSibling,x=d.firstChild,b=x.nextSibling;return a.$$click=()=>e.onChange(e.value===!0?void 0:!0),r(s,t(g,{get when(){return e.value===!0},get children(){return t(H,{class:"size-4"})}})),r(c,i),d.$$click=()=>e.onChange(e.value===!1?void 0:!1),r(x,t(g,{get when(){return e.value===!1},get children(){return t(H,{class:"size-4"})}})),r(b,n),r(l,t(g,{get when(){return e.value!==void 0},get children(){return[E(),(()=>{var v=Ye(),$=v.firstChild;return v.$$click=()=>e.onChange(void 0),r(v,t(T,{class:"mr-2 size-4"}),$),v})()]}}),null),O(v=>{var $=`relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors hover:bg-accent hover:text-accent-foreground ${e.value===!0?"bg-accent":""}`,S=`relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors hover:bg-accent hover:text-accent-foreground ${e.value===!1?"bg-accent":""}`;return $!==v.e&&q(a,v.e=$),S!==v.t&&q(d,v.t=S),v},{e:void 0,t:void 0}),l}})]}})}function tt(e){return t(N,{get children(){return[t(I,{class:"inline-flex h-9 items-center justify-center gap-1.5 rounded-md border border-input bg-transparent px-3 text-sm font-medium shadow-xs transition-[color,box-shadow] outline-none hover:bg-accent hover:text-accent-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]",get children(){return[(()=>{var i=A();return r(i,()=>e.label),i})(),t(g,{get when(){return e.value},get children(){return t(D,{variant:"secondary",class:"px-1.5 py-0.5 text-xs",get children(){return e.value}})}}),t(j,{class:"size-4 opacity-50"})]}}),t(R,{class:"p-3",get children(){var i=Ke();return r(i,t(K,{type:"date",get value(){return e.value??""},onInput:n=>e.onChange(n.currentTarget.value||void 0)}),null),r(i,t(g,{get when(){return e.value},get children(){return t(z,{variant:"ghost",size:"sm",class:"w-full",onClick:()=>e.onChange(void 0),get children(){return[t(T,{class:"mr-2 size-4"}),"清除"]}})}}),null),i}})]}})}Y(["click"]);var nt=u("<span>列"),lt=u('<div class="flex flex-col">'),rt=u('<div class=space-y-3><div class="flex flex-wrap items-center justify-between gap-3"><div class="flex flex-wrap items-center gap-2"></div><div class="flex items-center gap-2"></div></div><div class="rounded-md border">'),at=u('<div class="flex items-center justify-center py-8">'),it=u('<div class="flex flex-col items-center justify-center gap-2 py-8 text-muted-foreground"><p class=text-sm>没有数据');function ht(e){const[i,{refetch:n}]=le(()=>e.queryParams,e.fetcher),l=()=>e.queryParams.search??"",a=()=>e.queryParams.page??1,s=()=>e.queryParams.page_size??10,c=B(()=>{const{search:o,page:_,page_size:y,...F}=e.queryParams;return F}),[d,x]=J({}),b=B(()=>({pageIndex:a()-1,pageSize:s()})),v=o=>{e.onChange?.({...e.queryParams,...o})},$=o=>{v({search:o||void 0,page:1})},S=o=>{e.onChange?.({search:l()||void 0,page:1,page_size:s(),...o})},M=(o,_)=>{v({page:o+1,page_size:_})},p=()=>{e.onChange?.({page:1,page_size:s()})},m=re({get data(){return i()?.items??[]},get rowCount(){return i()?.total??0},columns:e.columns,state:{get pagination(){return b()},get columnVisibility(){return d()}},onPaginationChange:o=>{const _=b(),y=typeof o=="function"?o(_):o;M(y.pageIndex,y.pageSize)},onColumnVisibilityChange:o=>{x(typeof o=="function"?o(d()):o)},getCoreRowModel:ie(),getPaginationRowModel:ae(),manualPagination:!0,manualFiltering:!0,manualSorting:!0,meta:{refetch:n}}),ee=B(()=>{const o=c();return l()!==""||Object.keys(o).some(_=>o[_]!==void 0)});return(()=>{var o=rt(),_=o.firstChild,y=_.firstChild,F=y.nextSibling,te=_.nextSibling;return r(y,t(Ee,{get placeholder(){return e.searchPlaceholder??"搜索..."},get value(){return l()},onChange:$}),null),r(y,t(We,{get config(){return e.filterConfig??[]},get filters(){return c()},onChange:S}),null),r(y,t(g,{get when(){return ee()},get children(){return t(z,{variant:"ghost",size:"sm",onClick:p,children:"重置"})}}),null),r(F,t(g,{get when(){return e.showColumnToggle!==!1},get children(){return t(N,{get children(){return[t(I,{class:"inline-flex h-9 items-center justify-center gap-1.5 rounded-md border border-input bg-transparent px-3 text-sm font-medium shadow-xs transition-[color,box-shadow] outline-none hover:bg-accent hover:text-accent-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]",get children(){return[t(je,{class:"size-4"}),nt(),t(j,{class:"size-4 opacity-50"})]}}),t(R,{class:"min-w-[200px] p-1",get children(){var f=lt();return r(f,t(C,{get each(){return m.getAllColumns().filter(h=>h.getCanHide())},children:h=>t(W,{get checked(){return h.getIsVisible()},onChange:V=>h.toggleVisibility(V),class:"w-full rounded-sm py-1.5 px-2 hover:bg-accent hover:text-accent-foreground",get children(){return t(X,{class:"flex-1 cursor-pointer text-sm font-normal",get children(){return w(()=>typeof h.columnDef.header=="string")()?h.columnDef.header:h.id}})}})})),f}})]}})}}),null),r(F,()=>e.toolbarActions,null),r(te,t(me,{get children(){return[t(fe,{class:"bg-muted/50",get children(){return t(C,{get each(){return m.getHeaderGroups()},children:f=>t(L,{class:"hover:bg-muted/50",get children(){return t(C,{get each(){return f.headers},children:h=>t(xe,{class:"px-3 [&:has([role=checkbox])]:pr-0 [&:has([role=checkbox])]:pl-3",get colSpan(){return h.colSpan},get children(){return t(g,{get when(){return!h.isPlaceholder},get children(){return G(h.column.columnDef.header,h.getContext())}})}})})}})})}}),t(be,{get children(){return t(g,{get when(){return w(()=>!i.loading)()&&m.getRowModel().rows.length>0},get fallback(){return t(L,{get children(){return t(Q,{get colSpan(){return m.getAllColumns().length},class:"h-32 text-center",get children(){return t(g,{get when(){return i.loading},get fallback(){return(()=>{var f=it(),h=f.firstChild;return r(f,t(Me,{class:"h-10 w-10"}),h),f})()},get children(){var f=at();return r(f,t(he,{class:"h-6 w-6 animate-spin text-muted-foreground"})),f}})}})}})},get children(){return t(C,{get each(){return m.getRowModel().rows},children:(f,h)=>t(L,{get class(){return e.zebra!==!1&&h()%2===1?"bg-muted/50":""},get children(){return t(C,{get each(){return f.getVisibleCells()},children:V=>t(Q,{class:"px-3 py-2 [&:has([role=checkbox])]:pr-0 [&:has([role=checkbox])]:pl-3",get children(){return G(V.column.columnDef.cell,V.getContext())}})})}})})}})}})]}})),r(o,t(Le,{table:m}),null),o})()}function vt(e){return t(g,{get when(){return ve(e.permission)},get fallback(){return e.fallback},get children(){return e.children}})}export{ht as D,vt as R};

import{A as l,C as i,b as e,m as u}from"./vendor-ui-EoCh-MHn.js";import{R as g,D as _}from"./require-permission-D_BswdCx.js";import{T as d,e as m,B as o,A as f,f as p,D,g as b,h as $,i as z,j as C,k as P,l as T,m as h,a1 as v,u as x,o as y}from"./main-B6UhN7Jf.js";import{p as S}from"./pencil-DVWJvH6o.js";import{t as k,p as w}from"./trash-2-DtD5bXC7.js";import"./vendor-table-_hmjMY5i.js";import"./table-DwD-gW5i.js";import"./chevron-right-60A5FW0C.js";import"./badge-CGt68Hnc.js";import"./vendor-form-BYywqLDt.js";import"./vendor-editor-B9FEBeCH.js";var A=l("<span class=font-medium>"),N=l("<span class=text-sm>"),R=l('<span class="text-sm text-muted-foreground">-'),q=l('<div class="flex items-center gap-1">');const B=[{accessorKey:"name",header:"角色名称",cell:r=>(()=>{var t=A();return i(t,()=>r.getValue()),t})()},{accessorKey:"description",header:"描述",cell:r=>{const t=r.getValue();return t?(()=>{var n=N();return i(n,t),n})():R()}},{id:"actions",header:"操作",cell:r=>{const t=r.row.original,n=r.table.options.meta,c=async()=>{try{await v.delete(t.id),n.refetch()}catch(s){console.error("删除失败",s)}};return(()=>{var s=q();return i(s,e(g,{permission:"accounts:update_role",get children(){return e(d,{get children(){return[e(m,{as:a=>e(o,u({as:f,get href(){return`/roles/${t.id}`},variant:"ghost",size:"icon-sm"},a,{get children(){return e(S,{class:"size-3.5"})}}))}),e(p,{children:"编辑"})]}})}}),null),i(s,e(g,{permission:"accounts:delete_role",get children(){return e(D,{get children(){return[e(d,{get children(){return[e(b,{as:a=>e(m,u({as:o,variant:"ghost",size:"icon-sm",class:"text-destructive hover:text-destructive hover:bg-destructive/10"},a,{get children(){return e(k,{class:"size-3.5"})}}))}),e(p,{children:"删除"})]}}),e($,{get children(){return[e(z,{get children(){return[e(C,{children:"删除角色"}),e(P,{children:"删除后将无法恢复，确定要删除该角色吗？"})]}}),e(T,{get children(){return[e(h,{as:o,variant:"outline",children:"取消"}),e(h,{as:o,variant:"destructive",onClick:c,children:"确认删除"})]}})]}})]}})}}),null),s})()},enableHiding:!1}];var H=l('<div class="rounded-lg border bg-card p-3.5 pb-2">');function O(){const[r,t]=x(),n=y(),c=()=>({search:typeof r.search=="string"?r.search:void 0,page:Number(r.page)||1,page_size:Number(r.page_size)||10}),s=a=>{t({search:a.search||"",page:String(a.page??1),page_size:String(a.page_size??10)})};return(()=>{var a=H();return i(a,e(_,{columns:B,get fetcher(){return v.list},get queryParams(){return c()},onChange:s,searchPlaceholder:"搜索角色...",get toolbarActions(){return e(g,{permission:"accounts:create_role",get children(){return e(o,{size:"sm",onClick:()=>n("/roles/create"),get children(){return[e(w,{class:"size-4"}),"添加角色"]}})}})}})),a})()}export{O as default};
